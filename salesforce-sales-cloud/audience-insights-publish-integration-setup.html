<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Requirements">Requirements</h2>
    <ul>
      <li>Must have a package that provide Data and Marketing Automation Platform connections or a package that provides access to Audience Engagement Insights or Audience Subscriber Insights (if you have not purchased Audience Insights, <a href="https://supportportal.brightcove.com/">Contact Support</a> to have them set up the integration for you)</li>
      <li>Must be an admin for the Audience Insights account</li>
      <li>Salesforce account</li>
      <li>Salesforce Connected App set up: <a href="https://audience-insights.support.brightcove.com/integrations/salesforce-sales-cloud/salesforce-connected-app-setup.html">Salesforce Connected App Setup</a></li>
      <li>Must be a Salesforce user with permissions to authorize access to a connected app</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="add_publish_integration">Add Publish Integration</h2>
    <p>To publish a Salesforce integration from audience insights, follow these steps:</p>
    <!-- old section start  -->
    <!-- <ol class="bcls-tasklist-restart">
      <li>From a logged in Audience Insights scorecard, navigate to the <strong>Settings</strong> page.</li>
      <li>
        Scroll down to the Publish Integrations section and click <strong>Add Integration</strong>:
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/add-integration.webp" alt="Add Integration">
          <figcaption class="bcls-caption--image">Add Integration</figcaption>
        </figure>
      </li>
      <li>
        In the modal dialog, select Salesforce from the Destination dropdown:
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/add-integration-dialog.webp" alt="Add Integration Dialog">
          <figcaption class="bcls-caption--image">Add Integration Dialog</figcaption>
        </figure>
      </li>
      <li>
        Fill out the form with the values that were created when setting up the Connected App.
        <ul>
          <li>The Consumer Key and Consumer Secret will be the values from the Manage Consumer Details section of the Salesforce connected app.</li>
          <li>The Automated Export option controls how often there should be an automated publish to the Salesforce integration.</li>
        </ul>
      </li>
      <li>
        Clicking <strong>Create</strong> will redirect the user to Salesforce. If they are not logged in already, they will be prompted to log into Salesforce. There will be a prompt from within Salesforce asking the user to authorize access for the application. If they accept, they will be redirected back to the scorecard.
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/allow-access-to-sf.webp" alt="Authorize in Salesforce">
          <figcaption class="bcls-caption--image">Authorize in Salesforce</figcaption>
        </figure>
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/integration-successful.webp" alt="Integration Successful">
          <figcaption class="bcls-caption--image">Integration Successful</figcaption>
        </figure>
      </li>
    </ol> -->
    <!-- old section end  -->

    <ol class="bcls-tasklist-restart">
      <li>Log in to Video Cloud Studio.</li>
      <li>Open the <strong>Integrations</strong> module.</li>
      <li>Click<span class="button-blue-text">Customer Data Platforms</span>
          <figure class="bcls-figure">
              <img class="bcls-image" src="/assets/images/s-audience-insights-img/integrations/salesforce/salesforce-step3.webp" alt="integrations module">
              <figcaption class="bcls-caption--image">Integrations module</figcaption>
            </figure>
      </li>
      <li>Click <span class="button-blue">Add Integrations</span>.</li>
      <li>Select <strong>Salesforce</strong> from the Destination dropdown.
          <figure class="bcls-figure">
              <img class="bcls-image" src="/assets/images/s-audience-insights-img/integrations/salesforce/salesforce-step5.webp" alt="select sales force">
              <figcaption class="bcls-caption--image">Salesforce Integration</figcaption>
            </figure>
      </li>
      <li>Fill out the form.
      </li>
      <li>
        Clicking <span class="button-blue">Save</span> will redirect you to Salesforce. If you are not logged in already, you will be prompted to log into Salesforce. There will be a prompt from within Salesforce asking you to authorize access for the application. If you accept, you will be redirected back to the scorecard.
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/allow-access-to-sf.webp" alt="Authorize in Salesforce">
          <figcaption class="bcls-caption--image">Authorize in Salesforce</figcaption>
        </figure>
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/integration-successful.webp" alt="Integration Successful">
          <figcaption class="bcls-caption--image">Integration Successful</figcaption>
        </figure>
      </li>
  </ol>


  </section>
  <section class="bcls-section">
    <h2 id="publish_manual_report">Publish Manual Report</h2>
    <li>To use the newly added publish integration the user can manually publish a report. 
      <ol class="bcls-tasklist-restart">
        <li>
          Generate a report from the Audience Insight scorecard UI and navigate to the <strong>Reports</strong> page:
        </li>
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/publish-report.webp" alt="Reports Page">
          <figcaption class="bcls-caption--image">Reports Page</figcaption>
        </figure>
      </li>
      <li>Click on the menu icon next for the report to manually publish. Select Publish to Salesforce.</li>
      <li>
        The report will first move into the sync <strong>pending</strong> state where it sync contacts, joining contacts based on their email hash:
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/s-integrations-img/salesforce-sales-cloud/audience-insights-publish-integration-setup/publish-to-sf.webp" alt="Publish Pending">
          <figcaption class="bcls-caption--image">Publish Pending</figcaption>
        </figure>
      </li>
      <li>Then it will enter the <strong>publish</strong> state where it updates the contacts in Salesforce.</li>
      <li>Finally it will move to the <strong>completed</strong> state.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="Troubleshooting">Troubleshooting</h2>
    <h3>Job is failing</h3>
    <ul>
      <li>If you have both a Viewing Data Integration and a Contact Integration for Salesforce, one of the integrations can invalidate the other's credentials. We currently do not support having both simultaneously, so if this is the case, please delete one of the integrations and reauthorize the remaining one.</li>
      <li>If the issue persists, please get in touch with <a href="https://supportportal.brightcove.com/">Brightcove Support.</a></li>
    </ul>
  </section>
</article>